<%- include("../partials/header") %>

<% if (currentUser) { %>

<div id="body-container">
  <% if (currentUser.alerts.length === 0) { %>
  <div>
    <h1 class="header-black">ALERTS</h1>
    <div class="card-container card-center">
      You haven't set any alert
    </div>
  </div>
  <% } else { %>
  <div class="table-container">
    <h1 class="header-black">ALERTS</h1>
    <table class="table table-hover mb-0">
      <thead>
        <tr>
          <th scope="col" class="first-th">Company Name</th>
          <th scope="col">Symbol</th>
          <th scope="col">Alert Price</th>
        </tr>
      </thead>
      <tbody>
        <% alerts.forEach(function(alert){ %>
          <tr>
            <th scope="row" >
              <div class="row-header">
                <span class="delete"> 
                  <i class="fa fa-trash"></i> 
                </span> 
                <form class="d-none" action="/users/<%=currentUser._id%>/alerts/<%=alert.stockid%>?_method=DELETE"method="POST">
                  <button type="submit" class="d-none" id ="deleteButton"></button>
                </form>
                <%=alert.name%>
              </div>
            </th>
            <td>
              <%=alert.symbol%>
            </td>
            <td><%=alert.alertPrice%></td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  </div>
  <% } %>
<% } %>


<%- include("../partials/footer") %>
