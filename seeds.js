var mongoose = require("mongoose");
var Stock = require("./models/stock");
var User = require("./models/user");

var data = 
[
    {
        time : [ "June 19, 20", "June 18, 20", "June 17, 20", "June 16, 20", "June 15, 20", "June 12, 20", "June 11, 20", "June 10, 20", "June 09, 20", "June 08, 20", "June 05, 20", "June 04, 20", "June 03, 20", "June 02, 20", "June 01, 20", "May 29, 20", "May 28, 20", "May 27, 20", "May 26, 20", "May 22, 20", "May 21, 20", "May 20, 20", "May 19, 20", "May 18, 20", "May 15, 20", "May 14, 20", "May 13, 20", "May 12, 20", "May 11, 20", "May 08, 20" ],
        price : [ 268450, 267808, 264701, 264750, 262000, 252660, 260121, 260350, 264500, 252944, 250020, 244451, 247743, 246801, 246700, 244800, 241594, 238433, 240499, 245800, 245501, 250000, 247787, 242983, 240435, 236852, 236101, 236680, 241185, 237470 ], "change" : [ 29.32, -3.07, 6.97, -6.52, -4.73, 46.08, -56.19, -45.54, 2.45, 71.42, 23.86, 38.49, -16.83, 10.39, 5.41, 23.04, 26.43, 16.77, 5.4, -36.14, -18.13, -53.26, 20.07, 19.5, 21.91, 41.26, 27.84, 1.12, -54.9, 34.3 ], 
        changepercent : [ 1.092, -0.115, 0.263, -0.246, -0.181, 1.824, -2.16, -1.749, 0.093, 2.824, 0.954, 1.575, -0.679, 0.421, 0.219, 0.941, 1.094, 0.703, 0.225, -1.47, -0.738, -2.13, 0.81, 0.803, 0.911, 1.742, 1.179, 0.047, -2.276, 1.444 ], 
        symbol : "AMZN", 
        name : "Amazon.com, Inc.",
        lastupdated: "19"
    },
    {
        time : [ "June 22, 20", "June 19, 20", "June 18, 20", "June 17, 20", "June 16, 20", "June 15, 20", "June 12, 20", "June 11, 20", "June 10, 20", "June 09, 20", "June 08, 20", "June 05, 20", "June 04, 20", "June 03, 20", "June 02, 20", "June 01, 20", "May 29, 20", "May 28, 20", "May 27, 20", "May 26, 20", "May 22, 20", "May 21, 20", "May 20, 20", "May 19, 20", "May 18, 20", "May 15, 20", "May 14, 20", "May 13, 20", "May 12, 20", "May 11, 20" ], 
        price : [ 268450, 267808, 264701, 264750, 262000, 252660, 260121, 260350, 264500, 252944, 250020, 244451, 247743, 246801, 246700, 244800, 241594, 238433, 240499, 245800, 245501, 250000, 247787, 242983, 240435, 236852, 236101, 236680, 241185, 237470 ], "change" : [ 29.32, -3.07, 6.97, -6.52, -4.73, 46.08, -56.19, -45.54, 2.45, 71.42, 23.86, 38.49, -16.83, 10.39, 5.41, 23.04, 26.43, 16.77, 5.4, -36.14, -18.13, -53.26, 20.07, 19.5, 21.91, 41.26, 27.84, 1.12, -54.9, 34.3 ], 
        changepercent : [ 1.092, -0.115, 0.263, -0.246, -0.181, 1.824, -2.16, -1.749, 0.093, 2.824, 0.954, 1.575, -0.679, 0.421, 0.219, 0.941, 1.094, 0.703, 0.225, -1.47, -0.738, -2.13, 0.81, 0.803, 0.911, 1.742, 1.179, 0.047, -2.276, 1.444 ], 
        symbol : "AAPL", 
        name : "Apple, Inc.",
        lastupdated: "19"
    }   
];

function seedDB(){
    //Remove all stocks
    User.findOne({firstname: 'a'})
    .then ((foundUser) => {
        foundUser.trackedstocks = [];
        foundUser.save();
    })
    .catch((err) =>  {
        console.log(err);
    });

    Stock.remove({}, function(err){
         if(err){
             console.log(err);
         }
         console.log("removed stocks!");
          //add a few stocks
         data.forEach(function(seed){
             Stock.create(seed, function(err, stock){
                 if(err){
                     console.log(err)
                 } else {
                     console.log("added a stock");
                 }
             });
         });
     }); 
 }
 
 module.exports = seedDB;
